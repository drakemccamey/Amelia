<main class="masonry" id="gallery"></main>
<script>
  const files = [
    "DSC06943.JPG","DSC07286.JPG","DSC07333.JPG","DSC07616.JPG","DSC07618.JPG",
    "DSC07711.JPG","DSC08121.JPG","IMG_4520.jpg","IMG_4526.jpg","IMG_4648.jpg",
    "IMG_4683.jpg","IMG_5256.jpg","IMG_6030.jpg","IMG_7075.jpg","IMG_6515_2.JPG"
  ];
  const roots = ["media/","Media/","media/media/"];
  const gallery = document.getElementById("gallery");

  function addImg(name){
    const img = document.createElement("img");
    img.loading = "lazy";
    img.alt = "photo";
    img.style.cssText = "width:100%;display:block;margin:0 0 16px;border-radius:12px;border:1px solid rgba(255,255,255,.06)";
    img.dataset.name = name;
    img.dataset.try = "0";
    img.src = roots[0] + name;
    img.onerror = function(){
      let t = parseInt(img.dataset.try,10);
      const src = img.getAttribute("src");
      if(t < roots.length-1){
        t++; img.dataset.try = t.toString();
        img.src = roots[t] + name;
      } else if(src.endsWith(".JPG")){
        img.src = src.replace(/\.JPG$/, ".jpg");
      } else if(src.endsWith(".jpg")){
        img.src = src.replace(/\.jpg$/, ".JPG");
      } else {
        img.onerror = null; // give up
      }
    };
    gallery.appendChild(img);
  }
  files.forEach(addImg);
</script>
